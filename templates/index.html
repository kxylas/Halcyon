<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Halcyon</title>

    <script src="{{ url_for('static', filename='chatbot.js') }}"></script>

    <script>
        function sendFeedback() {
          const feedbackMessage = document.getElementById('feedbackMessage').value;
          fetch('/feedback', {
            method: 'POST',
            headers: {
            'Content-Type': 'application/json',
            },
              body: JSON.stringify({ message: feedbackMessage }),
          })
          .then(response => response.json())
          .then(data => {
            alert(data.message);
          })
          .catch(error => console.error('Error', error));
          document.getElementById('feedbackMessage').value = '';
        }

        function sendChatMessage() {
            const userMessage = document.getElementById('userMessage').value;

            // Display user's message in the chatbox
            appendMessage('You', userMessage);

            // Simulate chatbot response (in a real scenario, this would be fetched from a server)
            const chatbotResponse = getChatbotResponse(userMessage);

            // Display chatbot's response in the chatbox after a short delay
            setTimeout(() => {
                appendMessage('Chatbot', chatbotResponse);
            }, 500);
        }

        function appendMessage(sender, message) {
            const chatbox = document.getElementById('chatbox');
            const messageElement = document.createElement('p');
            messageElement.innerHTML = `<strong>${sender}:</strong> ${message}`;
            chatbox.appendChild(messageElement);
        }

        function getChatbotResponse(userMessage) {
            if (userMessage.toLowerCase().includes('sad')) {
                return "I'm here to listen. What's on your mind?";
            } else if (userMessage.toLowerCase().includes('happy')) {
                return "That's great! What brought you joy today?";
            } else {
                return "I'm here to provide emotional support. Feel free to share your thoughts.";
            }
        }
    </script>
</head>
<body>

<!-- Index Section -->
<div id="index">
    <h1>Welcome to Halcyon "Empowering every mind, every day"</h1>
    <p><a href="{{ url_for('login') }}">Login</a> or <a href="{{ url_for('register') }}">Register</a></p>
</div>

<!-- Register Section -->
<div id="register">
    <h1>Register</h1>
    <form method="post" action="{{ url_for('register') }}">
        <label for="username">Username:</label>
        <input type="text" name="username" required>
        <label for="password">Password:</label>
        <input type="password" name="password" required>
        <button type="submit">Register</button>
    </form>
    <p>Already have an account? <a href="{{ url_for('login') }}">Login here</a></p>
</div>

<!-- Login Section -->
<div id="login">
    <h1>Login</h1>
    <form method="post" action="{{ url_for('login') }}">
        <label for="username">Username:</label>
        <input type="text" name="username" required>
        <label for="password">Password:</label>
        <input type="password" name="password" required>
        <button type="submit">Login</button>
    </form>
    <p>Don't have an account? <a href="{{ url_for('register') }}">Register here</a></p>
</div>

<!-- Dashboard Section -->
<div id="dashboard">
    <h1>Welcome, John Doe!</h1>
    <h2>Log your mood:</h2>
    <form method="post" action="{{ url_for('dashboard') }}">
        <label for="mood">Mood:</label>
        <input type="text" name="mood" required>
        <button type="submit">Log Mood</button>
    </form>
  
    <h2>Chat with the Emotional Support Chatbot:</h2>
    <div id="chatbox"></div>
    <input type="text" id="userMessage" placeholder="Type your message...">
    <button onclick="sendChatMessage()">Send</button>

</div>

<!-- Crisis Response Section -->
<div id="crisis_response">
    <h1>Crisis Response Resources</h1>
    <p>If you or someone you know is in crisis, please reach out to the following resources:</p>
  <ul> 
    <li><strong>National Suicide Prvention Lifeline:</strong> 1-800-273-TALK (1-800-273-8255)</li>
    <li><strong>Crisis Text Line:</strong> Text "HELLO" to 741741</li>
    <li><strong>Emergency Services:</strong> Dail 911</li>
  </ul>
</div>

<!-- Create Peer Group Section -->
<div id="create_group">
    <h1>Create a Peer Group</h1>
    <form method="post" action="{{ url_for('create_group') }}">
        <label for="group_name">Group Name:</label>
        <input type="text" name="group_name" required>
        <button type="submit">Create Group</button>
    </form>
</div>

<!-- Join Peer Group Section -->
<div id="join_group">
    <h1>Join a Peer Group</h1>
    <form method="post" action="{{ url_for('join_group') }}">
        <label for="group_name">Group Name:</label>
        <input type="text" name="group_name" required>
        <button type="submit">Join Group</button>
    </form>
</div>

<!-- Peer Group Chat Section -->
<div id="peer_group_chat">
    <h1>Peer Group Chat - Group Name</h1>
    <div id="chatbox">
        <p><strong>John Doe:</strong> Hello, everyone!</p>
    </div>
    <form method="post" action="{{ url_for('peer_group_chat', group_name='group_name') }}">
        <label for="message">Message:</label>
        <input type="text" name="message" required>
        <button type="submit">Send Message</button>
    </form>
</div>

<!-- Mental Health Activities Section -->
<div id="mental_health_activities">
    <h1>Mental Health Exercises and Games</h1>
    <p>Explore activities, exercies, and games to support your mental health well-being:</p>
  <ul>
    <li><a href="https://www.headspace.com/meditation/mindfulness">Mindfulness Meditation</a</li>
    <li><a href="https://www.medicalnewstoday.com/articles/324417">Deep Breathing Excerises</a</li>
    <li><a href="https://positivepsychology.com/daily-positive-affirmations/">Positive Affirmations</a</li>
    <li><a href="https://www.calm.com/">Calm - Meditation and Sleep Stories</a></li>
    <li><a href="https://www.happify.com/">Happify - Science-Based Activities and Games</a></li>
    <li><a href="https://www.psychologytools.com/resource/coping-styles-wheel/">Coping Styles Wheel</a></li>
  </ul>
</div>

</body>
</html>
